# Hardhat ç¼“å­˜æ¸…ç†å·¥å…·æŒ‡å—

## ğŸ¯ æ¦‚è¿°

ä¸ºäº†ä¿æŒé¡¹ç›®æ•´æ´å’Œæé«˜å¼€å‘æ•ˆç‡ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€å¥—å®Œæ•´çš„ Hardhat ç¼“å­˜æ¸…ç†å·¥å…·ã€‚è¿™äº›å·¥å…·å¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿæ¸…ç†æœ¬åœ° Hardhat çš„åˆå§‹åŒ–è®°å½•å’Œæ„å»ºäº§ç‰©ã€‚

## ğŸ› ï¸ å¯ç”¨å·¥å…·

### 1. ä¸€é”®æ¸…ç† (æ¨è)
```bash
npm run clean:all
```
- æ¸…ç†æ‰€æœ‰ç¼“å­˜å’Œæ„å»ºäº§ç‰©
- åŒ…å« npm ç¼“å­˜æ¸…ç†
- é€‚ç”¨äºéƒ¨ç½²å‰æˆ–é—®é¢˜æ’æŸ¥

### 2. Hardhat ä¸“ç”¨æ¸…ç†
```bash
npm run clean:hardhat
```
- ä»…æ¸…ç† Hardhat ç›¸å…³ç¼“å­˜
- ä¿ç•™å…¶ä»–æ„å»ºäº§ç‰©
- é€‚ç”¨äºæ—¥å¸¸å¼€å‘

### 3. Shell è„šæœ¬æ¸…ç†
```bash
./scripts/cleanup/clean.sh
```
- å¿«é€Ÿ shell è„šæœ¬
- æ— éœ€ TypeScript ç¯å¢ƒ
- é€‚ç”¨äº CI/CD ç¯å¢ƒ

### 4. Hardhat å†…ç½®æ¸…ç†
```bash
npm run clean
```
- ä½¿ç”¨ Hardhat å†…ç½®åŠŸèƒ½
- åŸºç¡€æ¸…ç†åŠŸèƒ½

## ğŸ“ æ¸…ç†å†…å®¹è¯¦è§£

### ç›®å½•æ¸…ç†
| ç›®å½• | è¯´æ˜ | æ¸…ç†å½±å“ |
|------|------|----------|
| `cache/` | Hardhat ç¼–è¯‘ç¼“å­˜ | éœ€è¦é‡æ–°ç¼–è¯‘åˆçº¦ |
| `artifacts/` | åˆçº¦æ„å»ºäº§ç‰© | éœ€è¦é‡æ–°ç¼–è¯‘åˆçº¦ |
| `coverage/` | æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š | éœ€è¦é‡æ–°è¿è¡Œæµ‹è¯• |
| `typechain/` | TypeScript ç±»å‹å®šä¹‰ | éœ€è¦é‡æ–°ç”Ÿæˆç±»å‹ |
| `test-results/` | æµ‹è¯•ç»“æœ | éœ€è¦é‡æ–°è¿è¡Œæµ‹è¯• |
| `build/` | æ„å»ºäº§ç‰© | éœ€è¦é‡æ–°æ„å»º |

### æ–‡ä»¶æ¸…ç†
| æ–‡ä»¶æ¨¡å¼ | è¯´æ˜ |
|----------|------|
| `*.log` | å„ç§æ—¥å¿—æ–‡ä»¶ |
| `*.tmp` | ä¸´æ—¶æ–‡ä»¶ |
| `*.temp` | ä¸´æ—¶æ–‡ä»¶ |
| `.eslintcache` | ESLint ç¼“å­˜ |
| `gas-report.txt` | Gas ä½¿ç”¨æŠ¥å‘Š |
| `coverage.json` | è¦†ç›–ç‡æŠ¥å‘Š |

## ğŸš€ ä½¿ç”¨åœºæ™¯

### å¼€å‘ç¯å¢ƒé‡ç½®
å½“é‡åˆ°ä»¥ä¸‹é—®é¢˜æ—¶ï¼š
- åˆçº¦ç¼–è¯‘é”™è¯¯ä½†ä»£ç æ­£ç¡®
- ç±»å‹å®šä¹‰ä¸åŒ¹é…
- æµ‹è¯•å¤±è´¥ä½†é€»è¾‘æ­£ç¡®
- ç¼“å­˜å†²çªé—®é¢˜

**è§£å†³æ–¹æ¡ˆ:**
```bash
npm run clean:hardhat
npm run compile
npm run test
```

### éƒ¨ç½²å‰å‡†å¤‡
ç¡®ä¿ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å¹²å‡€ï¼š
```bash
npm run clean:all
npm run compile
npm run test
npm run coverage
```

### å®šæœŸç»´æŠ¤
ä¿æŒé¡¹ç›®æ•´æ´ï¼š
```bash
# æ¯å‘¨æ¸…ç†ä¸€æ¬¡
npm run clean:hardhat
```

### é—®é¢˜æ’æŸ¥
é‡åˆ°é—®é¢˜æ—¶å…ˆæ¸…ç†å†é‡è¯•ï¼š
```bash
npm run clean:all
npm install
npm run compile
npm run test
```

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. æ¸…ç†åå¿…é¡»é‡æ–°ç¼–è¯‘
```bash
npm run clean:all
npm run compile  # å¿…é¡»æ‰§è¡Œ
```

### 2. æµ‹è¯•éœ€è¦é‡æ–°è¿è¡Œ
```bash
npm run clean:all
npm run compile
npm run test     # å¿…é¡»æ‰§è¡Œ
```

### 3. å¤‡ä»½é‡è¦æ•°æ®
æ¸…ç†å‰ç¡®ä¿é‡è¦æ•°æ®å·²å¤‡ä»½ï¼Œç‰¹åˆ«æ˜¯ï¼š
- éƒ¨ç½²é…ç½®
- æµ‹è¯•æ•°æ®
- è‡ªå®šä¹‰è„šæœ¬

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

### æ ‡å‡†å¼€å‘æµç¨‹
```bash
# 1. æ¸…ç†ç¼“å­˜
npm run clean:hardhat

# 2. ç¼–è¯‘åˆçº¦
npm run compile

# 3. è¿è¡Œæµ‹è¯•
npm run test

# 4. æ£€æŸ¥è¦†ç›–ç‡
npm run coverage
```

### é—®é¢˜æ’æŸ¥æµç¨‹
```bash
# 1. å½»åº•æ¸…ç†
npm run clean:all

# 2. é‡æ–°å®‰è£…ä¾èµ–
npm install

# 3. é‡æ–°ç¼–è¯‘
npm run compile

# 4. è¿è¡Œæµ‹è¯•
npm run test

# 5. æ£€æŸ¥é—®é¢˜æ˜¯å¦è§£å†³
```

### éƒ¨ç½²å‰æµç¨‹
```bash
# 1. æ¸…ç†æ‰€æœ‰ç¼“å­˜
npm run clean:all

# 2. é‡æ–°ç¼–è¯‘
npm run compile

# 3. è¿è¡Œå®Œæ•´æµ‹è¯•
npm run test

# 4. æ£€æŸ¥è¦†ç›–ç‡
npm run coverage

# 5. è¿è¡Œå®‰å…¨æ£€æŸ¥
npm run lint
npm run format:check
```

## ğŸ› ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹æ¸…ç†å†…å®¹
ç¼–è¾‘ `scripts/cleanup/clean-all.ts` æ–‡ä»¶ä¸­çš„ `CLEANUP_TARGETS` æ•°ç»„ï¼š

```typescript
const CLEANUP_TARGETS = [
  'cache',
  'artifacts', 
  'coverage',
  // æ·»åŠ è‡ªå®šä¹‰ç›®å½•
  'custom-build-dir',
  // æ·»åŠ è‡ªå®šä¹‰æ–‡ä»¶
  'custom-file.json'
];
```

### æ·»åŠ æ–°çš„æ¸…ç†æ¨¡å¼
åˆ›å»ºæ–°çš„æ¸…ç†è„šæœ¬ï¼š

```typescript
// scripts/cleanup/clean-custom.ts
export function cleanCustom() {
  // è‡ªå®šä¹‰æ¸…ç†é€»è¾‘
}
```

ç„¶ååœ¨ `package.json` ä¸­æ·»åŠ å‘½ä»¤ï¼š

```json
{
  "scripts": {
    "clean:custom": "ts-node scripts/cleanup/clean-custom.ts"
  }
}
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æ¸…ç†å‰åå¯¹æ¯”
| æŒ‡æ ‡ | æ¸…ç†å‰ | æ¸…ç†å | æ”¹å–„ |
|------|--------|--------|------|
| é¡¹ç›®å¤§å° | ~50MB | ~10MB | 80% å‡å°‘ |
| ç¼–è¯‘æ—¶é—´ | 30s | 45s | é¦–æ¬¡ç¼–è¯‘è¾ƒæ…¢ |
| æµ‹è¯•æ—¶é—´ | 60s | 60s | æ— å½±å“ |
| ç£ç›˜ç©ºé—´ | é«˜ | ä½ | æ˜¾è‘—èŠ‚çœ |

### æœ€ä½³å®è·µ
1. **å¼€å‘é˜¶æ®µ**: ä½¿ç”¨ `npm run clean:hardhat` å¿«é€Ÿæ¸…ç†
2. **æµ‹è¯•é˜¶æ®µ**: ä½¿ç”¨ `npm run clean:all` å½»åº•æ¸…ç†
3. **éƒ¨ç½²é˜¶æ®µ**: ä½¿ç”¨ `npm run clean:all` ç¡®ä¿ç¯å¢ƒå¹²å‡€
4. **é—®é¢˜æ’æŸ¥**: é‡åˆ°é—®é¢˜æ—¶å…ˆæ¸…ç†ç¼“å­˜å†é‡è¯•

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ¸…ç†è„šæœ¬æ‰§è¡Œå¤±è´¥
```bash
# æ£€æŸ¥æƒé™
chmod +x scripts/cleanup/clean.sh

# æ£€æŸ¥ä¾èµ–
npm install
```

#### 2. æ¸…ç†åç¼–è¯‘å¤±è´¥
```bash
# é‡æ–°å®‰è£…ä¾èµ–
npm install

# æ£€æŸ¥ TypeScript é…ç½®
npm run compile
```

#### 3. æ¸…ç†åæµ‹è¯•å¤±è´¥
```bash
# é‡æ–°ç¼–è¯‘
npm run compile

# æ£€æŸ¥æµ‹è¯•é…ç½®
npm run test
```

### æ—¥å¿—åˆ†æ
æ¸…ç†è„šæœ¬ä¼šè¾“å‡ºè¯¦ç»†çš„æ—¥å¿—ï¼š
- `[SUCCESS]` - æˆåŠŸæ¸…ç†çš„é¡¹ç›®
- `[ERROR]` - æ¸…ç†å¤±è´¥çš„é¡¹ç›®
- `[INFO]` - ä¿¡æ¯æ€§æ¶ˆæ¯
- `[WARNING]` - è­¦å‘Šä¿¡æ¯

## ğŸ“ æ€»ç»“

é€šè¿‡ä½¿ç”¨è¿™äº›æ¸…ç†å·¥å…·ï¼Œæ‚¨å¯ä»¥ï¼š

1. **ä¿æŒé¡¹ç›®æ•´æ´** - å®šæœŸæ¸…ç†ç¼“å­˜å’Œæ„å»ºäº§ç‰©
2. **æé«˜å¼€å‘æ•ˆç‡** - é¿å…ç¼“å­˜å†²çªé—®é¢˜
3. **ç¡®ä¿éƒ¨ç½²è´¨é‡** - éƒ¨ç½²å‰å½»åº•æ¸…ç†ç¯å¢ƒ
4. **å¿«é€Ÿé—®é¢˜æ’æŸ¥** - é‡åˆ°é—®é¢˜æ—¶å…ˆæ¸…ç†å†é‡è¯•

å»ºè®®å°†æ¸…ç†å·¥å…·é›†æˆåˆ°æ‚¨çš„æ—¥å¸¸å¼€å‘æµç¨‹ä¸­ï¼Œå®šæœŸä½¿ç”¨ä»¥ä¿æŒé¡¹ç›®çš„æœ€ä½³çŠ¶æ€ã€‚ 